---
title: "Introdução à linguagem R: <br><br>"
subtitle: "4 Manejo de dados<br><br><br>"
author: "Maurício H. Vancine"
date: "09/01/2019"
output:
  xaringan::moon_reader:
    css: [metropolis]
    lib_dir: libs
    nature:
      #highlightStyle: github
      highlightLines: true
      countIncrementalSlides: true
    includes:
      in_header: header.html
---

```{r, setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

class: clear, center, middle
background-image: url(https://www.guru99.com/images/r_programming/032918_1452_RDataFrames2.png)
background-size: 700px
background-position: 50% 50%

---

# 4 Manejo de dados
## Tópicos
4.1 Manejo de dados unidimensionais
<br>
4.2 Manejo de dados bidimensionais
<br>
4.3 Valores faltantes e especiais
<br>
4.4 Diretório de trabalho
<br>
4.5 Importar dados
<br>
4.6 Conferir dados
<br>
4.7 Manejar dados
<br>
4.8 Exportar dados
<br>
Exercícios

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **1. Indexação []**: acessa elementos de vetores e fatores
```{r}
## indexacao []
# vetor
ve <- seq(10, 100, 10)
ve
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **1. Indexação []**: acessa elementos de vetores e fatores

### Selecionar elementos
```{r}
# seleciona o quinto elemento
ve[5]
```
--
```{r}
# seleciona os elementos de 10 a 50
ve[1:5] 
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **1. Indexação []**: acessa elementos de vetores e fatores

### Selecionar elementos
```{r}
# seleciona os elementos 10 e 100 e atribuir
ve.1.10 <- ve[c(1, 10)]
ve.1.10
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **1. Indexação []**: acessa elementos de vetores e fatores

### Adicionar elementos
```{r}
# adicionar elementos
ve[11] <- 110
ve
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **1. Indexação []**: acessa elementos de vetores e fatores

### Substituir elementos
```{r}
# substituir elementos
ve[5] <- 500
ve
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **1. Indexação []**: acessa elementos de vetores e fatores

### Retirar elementos
```{r}
# retirar o quinto elemento
ve[-11]
```
--
```{r}
# retirar os elementos 20 a 90
ve[-(2:9)]
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **1. Indexação []**: acessa elementos de vetores e fatores

### Retirar elementos
```{r}
# retirar os elementos 10 e 100 e atribuir
ve.menos.5.11 <- ve[-c(5, 11)]
ve.menos.5.11
```

---

class: inverse, center, middle

# Dúvidas?

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **2 Seleção condicional**: selecionar elementos por condições 
```{r}
# dois vetores
foo <- c(2, 4)
bar <- c(3, 6)
```
--
```{r, eval = FALSE}
# operadores relacionais - saidas booleanas (TRUE ou FALSE)
foo == bar # igualdade
foo != bar # diferenca 
foo > bar # maior
foo >= bar # maior ou igual
foo < bar # menor
foo <= bar # menor ou igual
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **2 Seleção condicional**: selecionar elementos por condições 
```{r}
# fixar a amostragem
set.seed(42)
```
--
```{r}
# vetor
ve <- rnorm(10)
ve
```
--
```{r}
# quais valores sao maiores que 1?
ve > 1 
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **2 Seleção condicional**: selecionar elementos por condições
```{r}
# valores acima de 1
ve[ve > 1] 
```
--
```{r}
# atribuir valores maiores que 1
ve.1 <- ve[ve > 1]
ve.1
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **3 Funções de manejo**: *max*, *min*, *range*, *length*, *sort*, *order* e *round*
```{r}
# maximo
max(ve)
```
--
```{r}
# minimo
min(ve)
```
--
```{r}
# variacao
range(ve)
```
--
```{r}
# comprimento
length(ve)
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **3 Funções de manejo**: *max*, *min*, *range*, *length*, *sort* e *round*
```{r}
# ordenar crescente
sort(ve)
```
--
```{r}
# ordenar decrescente
sort(ve, dec = TRUE)
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **3 Funções de manejo**: *max*, *min*, *range*, *length*, *sort* e *round*
```{r}
# mostrar a ordem da ordenacao crescente
order(ve)
```
--
```{r}
# mostrar a ordem da ordenacao decrescente
order(ve, decreasing = TRUE)
```
--
```{r}
# mostrar a ordem da ordenacao "sort"
order(sort(ve))
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **3 Funções de manejo**: *max*, *min*, *range*, *length*, *sort* e *round*
```{r}
# arredondamento
ve
```
--
```{r}
# arredondamento
round(ve, digits = 1)
```
--
```{r}
# arredondamento
round(ve, 3)
```

---




# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **3 Funções de manejo**: *any()*, *all()* e *which()*
```{r}
# algum?
any(ve > 1)
```
--
```{r}
# todos?
all(ve > 1)
```
--
```{r}
# qual(is)?
which(ve > 1)
```

---

# 4.1 Manejo de dados unidimensionais

## Vetor e fator

### **3 Funções de manejo**: *subset* e *ifelse*
```{r}
# subconjunto
subset(ve, ve > 1)
```
--
```{r}
# condicao para uma operacao
ifelse(ve > 1, 1, 0)
```

---

class: inverse, center, middle

# Dúvidas?

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **1. Indexação []**: acessa elementos de listas
```{r}
## indexacao []
# lista
li <- list(elem1 = 1, elem2 = 2, elem3 = 3)
li
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **1. Indexação []**: acessa elementos de listas

### Selecionar elementos
```{r}
# acessar o primeiro elemento
li[1]
```
--
```{r}
# acessar o primeiro e o terceiro elementos
li[c(1, 3)]
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **1. Indexação []**: acessa elementos de listas

### Selecionar elementos
```{r}
# acessar o segundo elemento e atribuir
li2 <- li[2]
li2
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **1. Indexação []**: acessa elementos de listas

### Adicionar elementos
```{r}
# adicionar elementos
li[4] <- 4
li
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **1. Indexação []**: acessa elementos de listas

### Substituir elementos
```{r}
# substituir elementos
li[2] <- 100
li
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **1. Indexação []**: acessa elementos de listas

### Retirar elementos
```{r}
# retirar o primeiro elemento
li[-1]
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **1. Indexação []**: acessa elementos de listas

### Retirar elementos
```{r}
# retirar o primeiro e o quarto elementos
li[-c(1, 4)]
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **1. Indexação []**: acessa elementos de listas

### Retirar elementos
```{r}
# retirar o segundo elemento e atribuir
li.menos.2 <- li[-2]
li.menos.2
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **2. Seleção $**: acessa elementos de listas pelo nome

### Selecionar elementos
```{r}
# selecionar elementos pelo nome
li$elem1
```
--
```{r}
# selecionar elementos pelo nome
li$elem2
```

---

# 4.1 Manejo de dados unidimensionais
## Listas

### **2. Seleção $**: acessa elementos de listas pelo nome

### Adicionar elementos
```{r}
# adicionar elementos pelo nome
li$elem4 <- 4
li
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **2. Seleção $**: acessa elementos de listas pelo nome

### Substituir elementos
```{r}
# substituir elementos pelo nome
li$elem2 <- 200
li
```

---

# 4.1 Manejo de dados unidimensionais

## Listas

### **3. Funções**: *length* e *names*
```{r}
# comprimento
length(li)
```
--
```{r}
# names
names(li)
```

---

class: inverse, center, middle

# Dúvidas?

---

background-image: url(https://www.guru99.com/images/r_programming/032918_1452_RDataFrames2.png)
background-size: 700px
background-position: 50% 70%

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **1 Indexação []**
```{r}
# matriz
ma <- matrix(1:12, 4, 3)
ma 
```

---

background-image: url(https://www.guru99.com/images/r_programming/032918_1452_RDataFrames1.png)
background-size: 400px
background-position: 50% 50%

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **1 Indexação []**

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **1 Indexação []**
```{r}
ma[3, ] # linha 3
```
--
```{r}
ma[, 2] # coluna 2
```
--
```{r}
ma[1, 2] # elemento da linha 1 e coluna 2
```
--
```{r}
ma[1, 1:2] # elementos da linha 1 e coluna 1 e 2
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **1 Indexação []**
```{r}
ma[1, c(1, 3)] # elementos da linha 1 e coluna 1 e 3
```
--
```{r}
ma.sel <- ma[1, c(1, 3)]
ma.sel
```

---

background-image: url(https://www.guru99.com/images/r_programming/032918_1452_RDataFrames2.png)
background-size: 700px
background-position: 50% 75%

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **1 Indexação []**: resumindo

---

# 4.2 Manejo de dados bidimensionais

## Data Frames

### **1 Indexação $**
```{r}
# criar três vetores
sp <- paste("sp", 1:10, sep = "")
abu <- 1:10
flo <- factor(rep(c("campo", "floresta"), each = 5))
```
--
```{r}
# data.frame
df <- data.frame(sp, abu, flo)
df
```

---

# 4.2 Manejo de dados bidimensionais

## Data Frames

### **1 Indexação $**
```{r}
# $ funciona apenas para data frame 
df$sp 
```
--
```{r}
df$abu
```
--
```{r}
df$flo
```

---

# 4.2 Manejo de dados bidimensionais

## Data Frames

### **1 Indexação $**
```{r}
length(df$abu)
max(df$abu)
min(df$abu)
range(df$abu)
```

---

# 4.2 Manejo de dados bidimensionais

## Data Frames

### **1 Indexação $ e mudanças de colunas**
```{r}
mode(df$abu)
```
--
```{r}
df$abu <- as.character(df$abu)
```
--
```{r}
df$abu
mode(df$abu)
```

---

# 4.2 Manejo de dados bidimensionais

## Data Frames

### **1 Indexação $ e mudanças de colunas**
```{r}
df$abu <- as.numeric(df$abu)
```
--
```{r}
df$abu
mode(df$abu)
```

---

# 4.2 Manejo de dados bidimensionais

## Data Frames

### **1 Indexação $ e adicionar uma coluna**
```{r}
set.seed(1)
df$abu2 <- sample(0:1, nrow(df), rep = TRUE)
```
--
```{r}
df$abu2
```
--
```{r}
df
```

---

# 4.2 Manejo de dados bidimensionais

## Data Frames

### **2 Seleção condicional**

### Selecionar linhas = filtro do planilha eletrônica
```{r}
# selecionar linhas de uma matriz ou data frame 
df[df$abu > 4, ]
```

---

# 4.2 Manejo de dados bidimensionais

## Data Frames

### **2 Seleção condicional**

### Selecionar linhas = filtro do planilha eletrônica
```{r}
# selecionar linhas de uma matriz ou data frame 
df[df$abu2 == 0, ]
```

---

# 4.2 Manejo de dados bidimensionais

## Data Frames

### **2 Seleção condicional**

### Selecionar linhas = filtro do planilha eletrônica
```{r}
# selecionar linhas de uma matriz ou data frame 
df[df$flo == "floresta", ]
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**

**head()**: mostra as primeiras 6 linhas<br>
**tail()**: mostra as últimas 6 linhas<br>
**nrow()**: mostra o número de linhas<br>
**ncol()**: mostra o número de colunas<br>
**dim()**: mostra o número de linhas e de colunas<br>
**rownames()**: mostra os nomes das linhas (locais)<br>
**colnames()**: mostra os nomes das colunas (variáveis)<br>
**str()**: mostra as classes de cada coluna (estrutura)<br>
**summary()**: mostra um resumo dos valores de cada coluna<br>
**rowSums()**: calcula a soma das linhas (horizontal)<br>
**colSums()**: calcula a soma das colunas (vertical)<br>
**rowMeans()**: calcula a média das linhas (horizontal)<br>
**colMeans()**: calcula a média das colunas (vertical)

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**
```{r}
head(df)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**
```{r}
head(df, 10)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**
```{r}
tail(df)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**
```{r}
nrow(df)
```
--
```{r}
ncol(df)
```
--
```{r}
dim(df)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**
```{r}
rownames(df)
```
--
```{r}
colnames(df)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**

### Mudar o nome das linhas
```{r}
df
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**

### Mudar o nome das linhas
```{r}
rownames(df)
```
--
```{r}
rownames(df) <- c(paste("local", 1:9, sep = "_0"), "local_10")
```
--
```{r}
rownames(df)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**

### Mudar o nome das linhas
```{r}
df
```


---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**
```{r}
str(df)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**
```{r}
summary(df)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**
```{r}
# criar uma matriz
ma <- matrix(c(12, 5, 8, 0, 15, 0, 0, 2, 7), 3)
ma
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**

### **rowSums()**: calcula a soma das linhas - horizontal - soma a abundância das espécies por local de amostragem
```{r}
# matriz
ma

# soma das linhas
rowSums(ma)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**

### **colSums()**: calcula a soma das colunas - vertical - soma a abundância total por espécie
```{r}
# matriz
ma

# soma das colunas
colSums(ma)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**

### **rowMeans()**: calcula a média das linhas - horizontal - calcula a média das abundância das espécies por local de amostragem
```{r}
# matriz
ma

# media das linhas
rowMeans(ma)
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **3 Funções de visualização e manejo**

### **colMeans()**: calcula a média das colunas - vertical - calcula a média da abundância por espécie
```{r}
# matriz
ma

# media das linhas
colMeans(ma)
```


---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **4 Amostragem de linhas**
```{r}
## amostragem de linhas
n.row <- 1:10
n.row
```
--
```{r}
n.row.sa <- sample(n.row, 4)
n.row.sa
```
--
```{r}
df.sa <- df[n.row.sa, ]
df.sa
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **4 Amostragem de linhas**
```{r}
# fixar amostragem
set.seed(5)

# amostragem de linhas
n.row <- 1:10
n.row
```
--
```{r}
n.row.sa <- sample(n.row, 4)
n.row.sa
```
--
```{r}
df.sa <- df[n.row.sa, ]
df.sa
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **5 Ordenação de linhas**
```{r}
# amostragem de linhas
df.so <- df[order(df$abu, decreasing = TRUE), ]
df.so
```
--
```{r}
# amostragem de linhas
df.so <- df[order(df$abu2, decreasing = TRUE), ]
df.so
```

---

# 4.2 Manejo de dados bidimensionais

## Matrizes e Data Frames

### **6 Subconjunto**
```{r}
df.su <- subset(df, flo == "floresta")
df.su
```
--
```{r}
df.su <- subset(df, abu2 == 1)
df.su
```

---

class: inverse, center, middle

# Dúvidas?

---

# 4.3 Valores faltantes e especiais

## São **valores reservados** que representam *dados faltantes*, *indefinições matemáticas*, *infinitos* e *objetos nulos*

--

<br><br>

### **1 NA (Not Available)**

### **2 NaN (Not a Number)**

### **3 Inf (Infinito)**

### **4 NULL**

---

# 4.3 Valores faltantes e especiais

## **1 NA (Not Available)**

### Significa dado faltante/indisponível

### **NA** deve ser maiúsculo

```{r}
# na - not available
foo.na <- NA
foo.na
```

---

# 4.3 Valores faltantes e especiais

## **1 NA (Not Available)**

### Criar um data frame com NA
```{r}
# data frame
df <- data.frame(var1 = c(1, 4, 2, NA), var2 = c(1, 4, 5, 2))
df
```

---

# 4.3 Valores faltantes e especiais

## **1 NA (Not Available)**

### Função para verificar a **presença/ausência** de NA's
```{r}
is.na(df)
```

--

### Função para verificar a **presença de algum** NA's
```{r}
any(is.na(df))
```

---

# 4.3 Valores faltantes e especiais

## **1 NA (Not Available)**

### Vamos retirar as linhas que possuem NA's
```{r}
df.sem.na <- na.omit(df)
df.sem.na
```
--
```{r}
nrow(df)
nrow(df.sem.na)
```

---

# 4.3 Valores faltantes e especiais

## **1 NA (Not Available)**

### Vamos substituir os NA's por 0
```{r}
# substituir na por 0
df[is.na(df)] <- 0
df
```

---

# 4.3 Valores faltantes e especiais

## **2 NaN (Not a Number)**

### Representa indefinições matemáticas como 0/0 e log(-1)

```{r}
# nan - not a number
0/0

log(-1)
```

---

# 4.3 Valores faltantes e especiais

## **2 NaN (Not a Number)**

### Um **NaN** é um **NA**, mas o **NA** não é um **NaN**

```{r}
# criar um vetor
ve <- c(1, 2, 3, NA, NaN)
ve
```
--
```{r}
# verificar a presenca de na
is.na(ve)
```
--
```{r}
# verificar a presenca de nan
is.nan(ve)
```

---

# 4.3 Valores faltantes e especiais

## **3 Inf (Infinito)**

### É um número muito grande ou um limite matemático, e.g., 10^310 e 1/0
```{r}
# limite matematico
1/0

# numero grande
10^310
```

---

# 4.3 Valores faltantes e especiais

## **4 NULL**

### Representa um objeto nulo

### Útil para preenchimento de laços e outras aplicações de programação

```{r}
# objeto nulo
nulo <- NULL
nulo
```

---

class: inverse, center, middle

# Dúvidas?

---

class: inverse, center, middle

# Agora vamos finalmente **importar** uma **planilha eletrônica** e fazer algumas **operações**

---

# 4.4 Diretório de trabalho

## Endereço da pasta onde o R irá **importar e exportar** os dados

**Atalho**: `ctrl + shift + H`

### **Windows: inverter as barras ("\" por "/")!**

```{r, eval = FALSE}
## diretorio de trabalho
# pasta onde o r ira importar e exportar os arquivos

# definir o diretorio de trabalho
setwd("/media/mauricio/data/0000_curso_r_labic/01_dados")
```
--
```{r, eval = FALSE}
# verificar o diretorio
getwd()
```
--
```{r, eval = FALSE}
# verificar os arquivos
dir()
```

---

class: inverse, center, middle

# E que dados iremos utilizar?

---

background-image: url(https://i1.rgstatic.net/ii/profile.image/277819868368896-1443248826184_Q512/Jessie_Dos_Santos.jpg)
background-size: 300px
background-position: 10% 70%

# Download de dados da internet

## **Atlantic butterflies: a data set of fruit‐feeding butterfly communities from the Atlantic forests**

### Jessie Pereira dos Santos et al. (2018)

---

class: inverse, center, middle

# Procurem "Atlantic butterflies" no Google e entrem no site do artigo

---

# Download de dados da internet

## **Atlantic butterflies: a data set of fruit‐feeding butterfly communities from the Atlantic forests**

### Download
```{r, eval = FALSE}
# download from internet
download.file(url = "https://esajournals.onlinelibrary.wiley.com/action/downloadSupplement?doi=10.1002%2Fecy.2507&file=ecy2507-sup-0001-DataS1.zip", 
              destfile = "ecy2507-sup-0001-DataS1.zip")
```

---

class: inverse, center, middle

# Confiram se o arquivo foi baixado na pasta **01_dados** de vocês

---

# Download de dados da internet

## **Atlantic butterflies: a data set of fruit‐feeding butterfly communities from the Atlantic forests**

### Download
```{r, eval = FALSE}
# download from internet
download.file(url = "https://esajournals.onlinelibrary.wiley.com/action/downloadSupplement?doi=10.1002%2Fecy.2507&file=ecy2507-sup-0001-DataS1.zip", 
              destfile = "ecy2507-sup-0001-DataS1.zip")
```

--

### Unzip
```{r, eval = FALSE}
unzip("ecy2507-sup-0001-DataS1.zip")
```

--

### Apagar zip
```{r, eval = FALSE}
unlink("ecy2507-sup-0001-DataS1.zip")
```

---

class: inverse, center, middle

# Vamos importar o arquivo "ATLANTIC_BUTTERFLIES_sites.csv"

---

class: inverse, center, middle

# Vamos criar uma cópia: "ATLANTIC_BUTTERFLIES_sites_raw.csv" e usar o arquivo "ATLANTIC_BUTTERFLIES_sites.csv" para entrar no R

---

# 4.5 Importar dados

## Os arquivos de dados podem estar em **quatro** formatos diferentes:

<br><br>

### 1. csv
### 2. txt
### 3. xlsx
### 4. ods

---

# 4.5 Importar dados

## Ler uma planilha eletrônica (.csv)
```{r}
# ler uma planilha eletronica (.csv)
read.csv("ATLANTIC_BUTTERFLIES_sites.csv")
```

---

# 4.5 Importar dados

## Ler uma planilha eletrônica (.csv) 
```{r}
# ler uma planilha eletronica (.csv)
read.csv("ATLANTIC_BUTTERFLIES_sites.csv", sep = ";", dec = ".")
```

---

# 4.5 Importar dados

## Ler e atribuir uma planilha eletrônica (.csv) a um objeto

--

```{r}
# ler e atribuir uma planilha eletronica (.csv) a um objeto
da <- read.csv("ATLANTIC_BUTTERFLIES_sites.csv", sep = ";", dec = ".")
```
--
```{r, eval = FALSE}
# ver os dados
da
```
--
```{r}
# conferir a classe
class(da)
```

---

class: inverse, center, middle

# IMPORTANTE: a tabela importada para o R sempre será um **data frame**!

---

# 4.5 Importar dados

## Ler e atribuir uma planilha simples (.txt) a um objeto

--

```{r}
# ler e atribuir uma planilha simples (.txt) a um objeto
da <- read.table("ATLANTIC_BUTTERFLIES_sites.txt", header = TRUE, sep = "\t")
```

---

# 4.5 Importar dados

## Ler e atribuir uma planilha eletrônica (.xlsx) a um objeto

### Pacote **openxlsx**
```{r, results = "hide"}
# pacote openxlsx
# install.packages("openxlsx")
library(openxlsx)
```

--

### Importar os dados
```{r}
# ler e atribuir uma planilha eletrônica (.xlsx) a um objeto
da <- openxlsx::read.xlsx("ATLANTIC_BUTTERFLIES_sites.xlsx", sheet = 1)
```

---

# 4.5 Importar dados

## Ler e atribuir uma planilha eletrônica (.xlsx) a um objeto

### Pacote **xlsx**
```{r, eval = FALSE}
# pacote xlsx
# install.packages("xlsx")
library(xlsx)
```

--

### Importar os dados
```{r, eval = FALSE}
# ler e atribuir uma planilha eletrônica (.xlsx) a um objeto
da <- xlsx::read.xlsx("ATLANTIC_BUTTERFLIES_sites.xlsx", sheetIndex = 1)
```

---

# 4.5 Importar dados

## Ler e atribuir uma planilha eletrônica (.ods) a um objeto

### Pacote **readODS**
```{r}
# pacote
# install.packages("readODS")
library(readODS)
```

--

### Importar os dados
```{r, eval = FALSE}
# ler e atribuir planilha eletronica (.ods) a um objeto
da <- read_ods("ATLANTIC_BUTTERFLIES_sites.ods")
```

---

class: inverse, middle, center

# Dúvidas?

---

# 4.6 Conferir dados

## Conjunto de funções para conferir os dados

**head()**: mostra as primeiras 6 linhas

**tail()**: mostra as últimas 6 linhas

**nrow()**: mostra o número de linhas

**ncol()**: mostra o número de colunas

**dim()**: mostra o número de linhas e de colunas

**rownames()**: mostra os nomes das linhas (locais)

**colnames()**: mostra os nomes das colunas (variáveis)

**str()**: mostra as classes de cada coluna (estrutura)

**summary()**: mostra um resumo dos valores de cada coluna

---

# 4.6 Conferir dados

## **head()**: mostra as primeiras 6 linhas
```{r}
head(da)
```

---

# 4.6 Conferir dados

## **head()**: mostra as primeiras 10 linhas
```{r}
head(da, 10)
```

---

# 4.6 Conferir dados

## **tail()**: mostra as últimas 6 linhas
```{r}
tail(da)
```

---

# 4.6 Conferir dados

## **nrow()**: mostra o número de linhas
```{r}
nrow(da)
```

--

## **ncol()**: mostra o número de colunas
```{r}
ncol(da)
```

--

## **dim()**: mostra o número de linhas e de colunas
```{r}
dim(da)
```

---

# 4.6 Conferir dados

## **rownames()**: mostra os nomes das linhas (locais)
```{r}
rownames(da)
```

---

# 4.6 Conferir dados

## **colnames()**: mostra os nomes das colunas (variáveis)
```{r}
colnames(da)
```

---

# 4.6 Conferir dados

## **str()**: mostra as classes de cada coluna (estrutura)
```{r}
str(da)
```

---

# 4.6 Conferir dados

## **summary()**: mostra um resumo dos valores de cada coluna
```{r}
summary(da)
```

---

# 4.7 Manejar dados

## Verificar a presença de NAs
```{r}
# algum?
any(is.na(da))
```
--
```{r}
# quais?
which(is.na(da))
```

---

# 4.7 Manejar dados

## Subset das linhas com NAs
```{r}
# subset das linhas com nas
da.com.na <- da[rowSums(is.na(da)) > 0, ]
da.com.na
```

---

# 4.7 Manejar dados

## Retirar os NAs
```{r}
da.na <- na.omit(da)
```
--
```{r}
nrow(da)
```
--
```{r}
nrow(da.na)
```

---

class: inverse, center, middle

# Dúvidas?

---

# 4.8 Exportar dados

## Exportar uma tabela de dados na pasta do diretório

<br><br>

--

### Planilha eletrônica (.csv)
```{r, eval = FALSE}
write.csv(da.na, "ATLANTIC_BUTTERFLIES_sites_sem_na.csv", row.names = FALSE, quote = FALSE)
```

--

### Planilha de texto (.txt)
```{r, eval = FALSE}
write.table(da.na, "ATLANTIC_BUTTERFLIES_sites_sem_na.txt", row.names = FALSE, quote = FALSE)
```

---

# 4.8 Exportar dados

## Exportar uma tabela de dados na pasta do diretório

<br><br>

### Planilha eletrônica (.xlsx)
```{r, eval = FALSE}
openxlsx::write.xlsx(da.na, "ATLANTIC_BUTTERFLIES_sites_sem_na.xlsx", row.names = FALSE, quote = FALSE)
xlsx::write.xlsx(da.na, "ATLANTIC_BUTTERFLIES_sites_sem_na.xlsx", row.names = FALSE, quote = FALSE)
```

--

### Planilha eletrônica (.ods)
```{r, eval = FALSE}
write_ods(da.na, "ATLANTIC_BUTTERFLIES_sites_sem_na.ods")
```

---

class: inverse, middle, center
 
# Dúvidas?

---

# Funcionamento geral do R

--

### 1. instalar e carregar pacotes
```{r, eval = FALSE}
install.packages("")
library("")
```

--

### 2. definir diretório
```{r, eval = FALSE}
setwd("")
getwd("")
```

--

### 3. importar os dados e atribui-los a objetos
```{r, eval = FALSE}
da <- read.alguma coisa
```

---

# Funcionamento geral do R

### 4. fazer operações através de funções nesse objeto e novas atribuições
```{r, eval = FALSE}
da.soma <- sum(da)
```

--

### 5. salvar as operações feitas
```{r, eval = FALSE}
write.alguma coisa(da.soma)
```

---

# Como são meus scripts?

--

### 1. Título: remete ao que aquele script está analisando
```{r}
### script exemplo ###
```

--

### 2. Assinatura: autoria, email e data
```{r}
# mauricio humberto vancine - mauricio.vancine@gmail.com
# 2018-08-18
```

--

### 3. Memória: limpar a memória
```{r, eval = FALSE}
rm(list = ls())
```

---

# Como são meus scripts?

### 4. Pacotes: instalar e carregar os pacotes para aquele script
```{r, eval = FALSE}
install.packages("raster")
library(raster)
```

--

### 5. Diretório: pasta com os dados
```{r, eval = FALSE}
setwd("")
getwd("")
```

---

class: inverse, middle, center

# Dúvidas?

---

class: inverse, middle, center

# Exercícios!

---

class: inverse, middle, center
background-image: url(https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif)

---

# Exercícios

## 1. Criem um novo script

<br><br>

### Pasta
`00_scripts`

<br>

### Arquivo
`script_r_curso_r_aula04_manejo_dados_exercicios_2019_01_d09.R`

---

# Exercícios

## 2. Criem um cabeçalho descritivo nesse script

--

```{r}
### exercicios aula 04 - manejo de dados ###

# nome
# data  
```

---

# Exercícios

## 3. Escolham um outro **Data Paper** então:

--

`1. Baixem utilizando a função "download.file"`

--

`2. Descomprimam utilizando a função "unzip"`

--

`3. Apaguem o .zip utilizando a função "unlink"`

--

`4. Façam uma cópia do arquivo que irão importar`

--

`5. Verifiquem: 1 - separação das colunas e 2 - nome das colunas`

--

`6. Importem os dados para o R utilizando a função correspondente à extenção do arquivo`

---

# Exercícios

## 4. Utilizem as funções de conferir os dados:

`head(): mostra as primeiras 6 linhas`

`tail(): mostra as últimas 6 linhas`

`nrow(): mostra o número de linhas`

`ncol(): mostra o número de colunas`

`dim(): mostra o número de linhas e de colunas`

`rownames(): mostra os nomes das linhas (locais)`

`colnames(): mostra os nomes das colunas (variáveis)`

`str(): mostra as classes de cada coluna (estrutura)`

`summary(): mostra um resumo dos valores de cada coluna`

---

# Exercícios

## 5. Verifiquem a presença de NAs. Utilizem as funções:

`is.na()`

`any(is.na())`

---

# Exercícios

## 6. Removam as linhas que contenham NAs e atrubuam a um objeto e substituam os NAs por **0** e atribuam a outro objeto. Utilizem as funções:

`na.omit`

`da[is.na(da)] <- 0`

---

# Exercícios

## 7. Exportem esses novos dados nos **quatro formatos** de tabelas. Utilizem as funções:

`write.csv()`

`write.table()`

`write.xlsx()`

`write_ods()`

---

class: inverse, center, middle

# Dúvidas?

---

class: clear, middle

## Maurício H. Vancine

<br>

Contatos:

|                                                                                                            |                                   |
| :--------------------------------------------------------------------------------------------------------- | :-------------------------------- |
| <a href="mailto:mauricio.vancine@gmail.com">.RUred[<i class="fa fa-paper-plane fa-fw"></i>]               | mauricio.vancine@gmail.com       |
| <a href="mauriciovancine.github.io">.RUred[<i class="fa fa-link fa-fw"></i>] | mauriciovancine.github.io |
| <a href="http://twitter.com/mauriciovancine">.RUred[<i class="fa fa-twitter fa-fw"></i>]                          | @mauriciovancine                         |
| <a href="http://gitlab.com/mauriciovancine">.RUred[<i class="fa fa-gitlab fa-fw"></i>]                          | @mauriciovancine                       |
| <a href="http://github.com/mauriciovancine">.RUred[<i class="fa fa-github fa-fw"></i>]                          | @mauriciovancine                       |

Slides criados via pacote [xaringan](https://github.com/yihui/xaringan) e tema [Metropolis](https://github.com/pat-s/xaringan-metropolis).